apiVersion: apps/v1      # Versão da API
kind: Deployment         # Tipo: Gerenciador de Pods
metadata:
  name: frontend-deployment  # Nome do Deployment
  namespace: k8slab         # Namespace
  labels:
    app: frontend           # Label
spec:
  replicas: 3               # ← 3 PODS (mais tráfego no frontend)
  selector:                 # ← SELETOR DE PODS
    matchLabels:
      app: frontend         # Procura Pods com "app: frontend"
  template:                 # ← TEMPLATE DO POD
    metadata:
      labels:
        app: frontend       # ← LABEL DE CADA POD
    spec:                   # ← SPEC DO POD
      containers:           # ← CONTAINERS NO POD
      - name: frontend      # Nome do container
        image: k8slab-frontend:latest  # Imagem (Angular + Nginx)
        ports:
        - containerPort: 80            # Porta do Nginx
        resources:                     # ← RECURSOS (frontend usa menos)
          requests:                    # Mínimo
            memory: "128Mi"            # 128MB RAM
            cpu: "100m"                # 0.1 CPU
          limits:                      # Máximo
            memory: "256Mi"            # 256MB RAM
            cpu: "200m"                # 0.2 CPU
        livenessProbe:               # ← TESTE DE VIDA
          httpGet:
            path: /                    # Página inicial
            port: 80
          initialDelaySeconds: 10      # Espera 10s
          periodSeconds: 10            # Testa a cada 10s
        readinessProbe:              # ← TESTE DE PRONTIDÃO
          httpGet:
            path: /                    # Página inicial
            port: 80
          initialDelaySeconds: 5       # Espera 5s
          periodSeconds: 5             # Testa a cada 5s
---
# Função: Gerencia 3 Pods do frontend (Angular + Nginx)
# Analogia: Garante 3 "lojas" sempre abertas para atender clientes
# Benefícios: Alta disponibilidade, distribuição de carga